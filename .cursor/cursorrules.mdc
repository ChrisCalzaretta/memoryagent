---
alwaysApply: true
---

# MemoryAgent - Split Architecture MCP Servers

## ğŸš¨ TWO MCP SERVERS - Choose the Right One!

| Server | Use For | Entry Point |
|--------|---------|-------------|
| **ğŸ§  memory-agent** | Search, analysis, understanding | `execute_task({ request: "..." })` |
| **ğŸš€ code-generator** | Code generation, design systems | `orchestrate_task({ task: "..." })` |

---

## ğŸ§  Memory Agent - Search & Analysis

**For finding, understanding, and analyzing existing code.**

### When to Use
- Searching for code patterns
- Understanding how features work
- Analyzing complexity or security
- Storing/retrieving knowledge
- Planning and task breakdown

### How to Use

```javascript
// Natural language through execute_task
execute_task({ request: "Find all authentication code" })
execute_task({ request: "Explain how the payment system works" })
execute_task({ request: "Analyze security vulnerabilities" })
execute_task({ request: "Create a plan for implementing OAuth" })
execute_task({ request: "Store this solution for future reference" })
```

### Tool Categories

| Category | Examples |
|----------|----------|
| ğŸ” **Discovery** | semantic_search, smart_search, graph_search |
| ğŸ“Š **Analysis** | explain_code, impact_analysis, complexity |
| ğŸ§  **Knowledge** | store_qa, get_insights, record_context |
| ğŸ“‹ **Planning** | create_plan, estimate_complexity |
| ğŸ“š **Indexing** | index_workspace, reindex_all |

---

## ğŸš€ Code Generator - Multi-Agent Generation

**For creating new code with automatic validation.**

### When to Use
- Generating new features/applications
- Creating REST APIs, services
- Building UI components
- Creating design systems/brands
- Validating code against brand guidelines

### How to Use

```javascript
// Direct tool calls - no routing overhead!
orchestrate_task({ 
  task: "Create a user authentication service with JWT",
  language: "typescript",
  maxIterations: 50
})

// Check job status
get_task_status({ jobId: "job_20241219_abc123" })

// Get generated files
apply_task_files({ 
  jobId: "job_20241219_abc123",
  basePath: "E:\\MyProject"
})

// Design tools
design_create_brand({
  brand_name: "MyApp",
  industry: "SaaS",
  personality_traits: ["Modern", "Professional"]
})
```

### Available Tools

| Tool | Description |
|------|-------------|
| `orchestrate_task` | Start multi-agent code generation |
| `get_task_status` | Check job progress |
| `cancel_task` | Stop a running job |
| `list_tasks` | See all active jobs |
| `apply_task_files` | Get files ready for writing |
| `design_create_brand` | Create brand system |
| `design_validate` | Validate against brand |
| `design_get_brand` | Get brand definition |

---

## ğŸ¯ Decision Guide

### Use memory-agent when you want to:
- âœ… Find existing code
- âœ… Understand how something works
- âœ… Search for patterns
- âœ… Analyze code quality
- âœ… Get project knowledge
- âœ… Create plans

### Use code-generator when you want to:
- âœ… Create new code from scratch
- âœ… Generate complete features
- âœ… Build applications
- âœ… Create/validate design systems
- âœ… Get validated, quality-checked code

---

## ğŸ“ Examples

### Search for Database Code (memory-agent)
```javascript
execute_task({ request: "Find all SQL queries in this codebase" })
```

### Generate REST API (code-generator)
```javascript
orchestrate_task({ 
  task: "Create a REST API for user management with CRUD operations",
  language: "python"
})
```

### Understand a Feature (memory-agent)
```javascript
execute_task({ request: "Explain how authentication works in this project" })
```

### Create a Brand System (code-generator)
```javascript
design_create_brand({
  brand_name: "HealthTrack",
  industry: "Health",
  personality_traits: ["Trustworthy", "Calm", "Professional"],
  visual_style: "Soft",
  theme_preference: "Light mode"
})
```

### Plan a Feature (memory-agent)
```javascript
execute_task({ request: "Create a plan for implementing real-time notifications" })
```

### Generate Full Application (code-generator)
```javascript
orchestrate_task({ 
  task: "Create a Blazor chess game with standard rules, piece movement, check/checkmate detection",
  language: "csharp",
  maxIterations: 100
})
```

---

## ğŸ”„ Workflow Pattern

**For complex tasks, use both servers:**

1. **Search first** (memory-agent)
   ```javascript
   execute_task({ request: "Find existing user management code" })
   ```

2. **Generate new code** (code-generator)
   ```javascript
   orchestrate_task({ task: "Create improved user service with caching" })
   ```

3. **Validate result** (memory-agent)
   ```javascript
   execute_task({ request: "Analyze the generated code for security issues" })
   ```

---

## âš¡ Why Split Architecture?

| Aspect | Before (Single Router) | After (Split) |
|--------|----------------------|---------------|
| **Routing overhead** | 3-5 seconds | 0 for code-gen |
| **Clarity** | AI decides | You choose |
| **Speed** | Always routed | Direct calls |
| **Debugging** | Complex | Clear |

**Code generation is already slow (60+ seconds). Removing routing overhead makes it faster and more predictable.**

---

## ğŸ“ Service URLs

| Service | Port | MCP Wrapper |
|---------|------|-------------|
| MemoryRouter | 5010 | memory-router-mcp-wrapper.js |
| CodingOrchestrator | 5003 | orchestrator-mcp-wrapper.js |

---

## ğŸš¦ Quick Health Check

```bash
curl http://localhost:5010/health  # Memory services
curl http://localhost:5003/health  # Code generation
```
