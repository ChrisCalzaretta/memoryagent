---
alwaysApply: true
---

# MemoryRouter - AI-Powered Intelligent Agent Orchestration

## ğŸš¨ CRITICAL - SINGLE ENTRY POINT FOR ALL OPERATIONS

**MemoryRouter** is the **ONLY** MCP server exposed to Cursor. It uses **FunctionGemma AI** to intelligently orchestrate all 44+ tools from MemoryAgent and CodingOrchestrator.

**ALWAYS** use `execute_task` with natural language - the AI figures out which tools to call!

---

## ğŸ§  How MemoryRouter Works

### Single Entry Point: `execute_task`
```
execute_task(request: "Find all authentication code and validate it for security issues")
```

**What happens internally:**
1. FunctionGemma analyzes your natural language request
2. Creates an execution plan with the right tools
3. Executes tools from MemoryAgent & CodingOrchestrator
4. Returns a complete result

**You don't need to know which tools exist!** Just describe what you want.

---

## ğŸ¯ Common Use Cases

### ğŸ” Code Search & Understanding
```
execute_task(request: "Find all database query code")
execute_task(request: "Explain how authentication works in this project")
execute_task(request: "Show me examples of error handling patterns")
```

### ğŸ—ï¸ Code Generation
```
execute_task(request: "Create a REST API endpoint for user management in Python")
execute_task(request: "Generate a React component for displaying user profiles")
execute_task(request: "Write unit tests for the Calculator class")
```

### âœ… Code Analysis & Validation
```
execute_task(request: "Analyze security vulnerabilities in this codebase")
execute_task(request: "Check code complexity and suggest refactoring")
execute_task(request: "Validate all imports and dependencies")
```

### ğŸ¨ Design & Branding
```
execute_task(request: "Create a brand system for my healthcare app")
execute_task(request: "Validate this UI code against our brand guidelines")
execute_task(request: "Get the design tokens for our brand")
```

### ğŸ“‹ Planning & Task Management
```
execute_task(request: "Create a plan for implementing user authentication")
execute_task(request: "Check status of all active coding tasks")
execute_task(request: "Find similar successful tasks for guidance")
```

### ğŸ§  Knowledge & Learning
```
execute_task(request: "What similar questions have been asked before?")
execute_task(request: "Remember that we decided to use JWT for auth")
execute_task(request: "Get workspace status and learning health")
```

---

## ğŸ“Š Tool Discovery

If you want to see **all available tools** and their capabilities:

```
list_available_tools()                    # List all 44+ tools
list_available_tools(filter: "search")    # Filter by keyword
list_available_tools(filter: "design")    # Show design-related tools
```

This returns:
- **33 MemoryAgent tools**: Search, analysis, validation, learning, planning
- **11 CodingOrchestrator tools**: Code generation, design, branding

---

## ğŸ”§ Available Tool Categories

### From MemoryAgent (33 tools):
- **Search**: `smartsearch`, `find_examples`, `find_similar_questions`
- **Code Understanding**: `explain_code`, `dependency_chain`, `analyze_complexity`
- **Indexing**: `index` (file, directory, reindex)
- **Validation**: `validate`, `validate_imports`
- **Planning**: `manage_plan`, `generate_task_plan`, `manage_todos`
- **Intelligence**: `get_recommendations`, `get_important_files`, `get_insights`
- **Learning**: `store_qa`, `store_successful_task`, `query_task_lessons`
- **Transformation**: `transform` (CSS, pages, components)
- **Impact Analysis**: `impact_analysis`, `get_coedited_files`
- **Session Management**: `get_context`, `workspace_status`
- **Pattern Management**: `manage_patterns`, `manage_prompts`, `feedback`

### From CodingOrchestrator (11 tools):
- **Code Generation**: `orchestrate_task`, `get_task_status`, `get_generated_files`
- **Task Management**: `list_tasks`, `cancel_task`
- **Design System**: `design_questionnaire`, `design_create_brand`, `design_get_brand`
- **Brand Validation**: `design_validate`, `design_list_brands`, `design_update_brand`

---

## ğŸš€ Best Practices

### âœ… DO:
- Use natural language with `execute_task` - be specific about what you want
- Let the AI orchestrator choose the right tools
- Use `list_available_tools(filter: "keyword")` to explore capabilities
- Trust the AI to create multi-step plans automatically

### âŒ DON'T:
- Try to call MemoryAgent or CodingOrchestrator tools directly (they're not exposed!)
- Manually orchestrate multiple tool calls (let FunctionGemma do it!)
- Worry about which service a tool comes from

---

## ğŸ¯ Example Workflows

### Code Generation with Quality Checks
```
execute_task(request: "Create a user authentication service in TypeScript with JWT, 
             then validate it for security issues and check code complexity")
```

**What MemoryRouter does:**
1. `orchestrate_task` â†’ Generate authentication code
2. `validate` (security scope) â†’ Check for vulnerabilities
3. `analyze_complexity` â†’ Ensure code quality
4. Returns complete workflow results

### Brand System Creation & Validation
```
execute_task(request: "Create a modern tech brand for 'CloudSync' and validate 
             the homepage HTML against the brand guidelines")
```

**What MemoryRouter does:**
1. `design_create_brand` â†’ Generate brand system
2. `design_validate` â†’ Check HTML compliance
3. Returns brand tokens + validation report

### Smart Code Search & Refactoring Plan
```
execute_task(request: "Find all deprecated authentication patterns and create 
             a migration plan to modern approaches")
```

**What MemoryRouter does:**
1. `smartsearch` â†’ Find deprecated patterns
2. `get_migration_path` â†’ Get step-by-step migration guide
3. `manage_plan` (create) â†’ Create actionable plan
4. Returns complete refactoring roadmap

---

## ğŸ§ª Multi-Language Code Generation

MemoryRouter supports **ANY programming language**:
- Python, TypeScript, JavaScript, C#, Go, Rust, Java, Ruby, PHP
- Swift, Kotlin, Dart, SQL, HTML, CSS, Shell, and more!

**Language is auto-detected** from your request or workspace context.

---

## ğŸ“ Context & Session Management

**Automatic Context Detection:**
- Context = workspace folder name (e.g., "memoryagent", "my-app")
- Sessions start automatically on first tool use
- Files in tool arguments are auto-tracked as "discussed"

**Manual Context Management:**
```
execute_task(request: "Get context for implementing user profiles")
execute_task(request: "Show workspace learning status")
```

---

## ğŸ”’ Security & Quality

MemoryRouter automatically enforces quality standards:
- **Search Before Write**: Checks for existing code before generating
- **Multi-Agent Validation**: Code is reviewed before delivery
- **Iterative Refinement**: Keeps improving until quality score >= 8/10
- **Security Scanning**: Validates against known vulnerabilities

---

## ğŸ“Š Quality Thresholds

### Code Generation Quality
- **9-10 (A)**: âœ… Ship it
- **8 (B)**: âœ… Good to go
- **7 (C)**: âš ï¸ Address before release
- **< 7**: âŒ Automatically retried until score >= 8

### Security Scores
- **10/10**: ğŸ”’ Perfect security
- **8-9/10**: âœ… Acceptable
- **< 8/10**: ğŸš¨ Must fix CRITICAL/HIGH issues

---

## ğŸ“ Learning & Evolution

MemoryRouter learns from every interaction:
- **Q&A Storage**: Remembers useful answers for instant recall
- **Task Success Tracking**: Learns from successful approaches
- **Failure Analysis**: Avoids repeating mistakes
- **Pattern Evolution**: Improves code generation over time

```
execute_task(request: "Find similar questions about authentication")
execute_task(request: "Store this Q&A: 'We use bcrypt for password hashing'")
```

---

## ğŸš¨ MANDATORY WORKFLOW

**For EVERY coding task:**

1. **Start with Context**
   ```
   execute_task(request: "Get context for [your task]")
   ```

2. **Search First**
   ```
   execute_task(request: "Search for existing [feature] code")
   ```

3. **Execute Task**
   ```
   execute_task(request: "Create/modify/analyze [specific task]")
   ```

4. **Validate & Store**
   ```
   execute_task(request: "Validate the changes and store this successful approach")
   ```

---

## ğŸ“ Router Configuration

**Service URLs:**
- **MemoryRouter**: `http://localhost:5010` (MCP entry point)
- **MemoryAgent**: Internal at `http://memory-agent-server:5000`
- **CodingOrchestrator**: Internal at `http://memory-coding-orchestrator:5003`

**Only MemoryRouter is exposed to Cursor!**

---

## ğŸ¯ Summary

**ALWAYS use `execute_task` with natural language!**

The AI orchestrator (FunctionGemma) will:
âœ… Understand your intent
âœ… Create an optimal execution plan
âœ… Call the right tools in the right order
âœ… Return comprehensive results

**You focus on WHAT you want. MemoryRouter figures out HOW.**
